# =====================================================
# Environment Variables - Blog & Video Platform
# Copy this to .env and update values
# =====================================================

# ===================================================
# NODE ENVIRONMENT
# ===================================================
NODE_ENV=development

# ===================================================
# API SERVER
# ===================================================
PORT=3000
API_BASE_URL=http://localhost:3000

# ===================================================
# DATABASE - PostgreSQL
# ===================================================
DATABASE_URL=postgresql://blog_user:blog_password_change_in_production@localhost:5432/blog_platform
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=blog_platform
DATABASE_USER=blog_user
DATABASE_PASSWORD=blog_password_change_in_production

# Connection Pool
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_POOL_ACQUIRE_TIMEOUT=30000
DATABASE_POOL_IDLE_TIMEOUT=10000

# ===================================================
# REDIS - Cache & Queue
# ===================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis_password_change_in_production
REDIS_DB=0
REDIS_KEY_PREFIX=blog:

# Cache TTL (seconds)
CACHE_TTL_SHORT=300        # 5 minutes
CACHE_TTL_MEDIUM=1800      # 30 minutes
CACHE_TTL_LONG=86400       # 24 hours

# ===================================================
# MINIO - Object Storage (S3-compatible)
# ===================================================
MINIO_ENDPOINT=localhost
MINIO_PORT=9000
MINIO_ACCESS_KEY=minio_admin
MINIO_SECRET_KEY=minio_password_change_in_production
MINIO_USE_SSL=false
MINIO_BUCKET_VIDEOS=videos
MINIO_BUCKET_IMAGES=images
MINIO_BUCKET_THUMBNAILS=thumbnails

# Presigned URL expiration (seconds)
MINIO_PRESIGNED_URL_EXPIRY=3600  # 1 hour

# ===================================================
# OLLAMA - Local LLM for AI
# ===================================================
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_EMBEDDING_MODEL=nomic-embed-text
OLLAMA_CHAT_MODEL=llama3
OLLAMA_TIMEOUT=30000

# ===================================================
# JWT - Authentication
# ===================================================
JWT_SECRET=your_jwt_secret_change_in_production_min_32_chars
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=your_jwt_refresh_secret_change_in_production
JWT_REFRESH_EXPIRES_IN=30d

# ===================================================
# SESSION
# ===================================================
SESSION_SECRET=your_session_secret_change_in_production
SESSION_MAX_AGE=604800000  # 7 days in milliseconds

# ===================================================
# CORS
# ===================================================
CORS_ORIGIN=http://localhost:3001,http://localhost:19006
CORS_CREDENTIALS=true

# ===================================================
# FILE UPLOAD LIMITS
# ===================================================
MAX_FILE_SIZE=2147483648        # 2GB in bytes
MAX_IMAGE_SIZE=5242880          # 5MB in bytes
MAX_VIDEO_DURATION=1800         # 30 minutes in seconds
ALLOWED_VIDEO_TYPES=video/mp4,video/quicktime,video/x-msvideo,video/x-matroska
ALLOWED_IMAGE_TYPES=image/jpeg,image/png,image/webp,image/gif

# ===================================================
# VIDEO PROCESSING - FFmpeg
# ===================================================
FFMPEG_THREADS=4
FFMPEG_PRESET=medium           # ultrafast, superfast, veryfast, faster, fast, medium, slow, slower, veryslow
VIDEO_QUALITIES=1080p,720p,480p,360p
ENCODING_TIMEOUT=1800000       # 30 minutes in milliseconds
MAX_ENCODING_RETRIES=3

# Video bitrates (kbps)
VIDEO_BITRATE_1080P=5000
VIDEO_BITRATE_720P=2800
VIDEO_BITRATE_480P=1400
VIDEO_BITRATE_360P=800

# Audio settings
AUDIO_CODEC=aac
AUDIO_BITRATE=128k
AUDIO_CHANNELS=2
AUDIO_SAMPLE_RATE=44100

# ===================================================
# RATE LIMITING
# ===================================================
RATE_LIMIT_WINDOW_MS=900000    # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100    # per window
RATE_LIMIT_UPLOAD_MAX=10       # per window

# ===================================================
# SEARCH & AI
# ===================================================
SEARCH_RESULTS_LIMIT=20
SEMANTIC_SEARCH_MIN_SIMILARITY=0.7
VECTOR_DIMENSIONS=1536
RAG_CONTEXT_POSTS_LIMIT=5
EMBEDDING_BATCH_SIZE=10

# ===================================================
# BUSINESS RULES
# ===================================================
MAX_POSTS_PER_USER=100
MAX_TAGS_PER_POST=5
MAX_COMMENT_LENGTH=500
MAX_BIO_LENGTH=500
SPAM_THRESHOLD_SCORE=5
AUTO_APPROVE_COMMENTS_AFTER_HOURS=24

# ===================================================
# EMAIL (Optional - for future implementation)
# ===================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
EMAIL_FROM=noreply@blogplatform.local

# ===================================================
# LOGGING
# ===================================================
LOG_LEVEL=info                 # error, warn, info, http, verbose, debug, silly
LOG_FORMAT=json                # json, simple
LOG_FILE_PATH=logs/app.log
LOG_MAX_SIZE=20m
LOG_MAX_FILES=14d

# ===================================================
# MONITORING (Optional)
# ===================================================
SENTRY_DSN=
NEW_RELIC_LICENSE_KEY=
DATADOG_API_KEY=

# ===================================================
# FEATURES FLAGS
# ===================================================
ENABLE_SWAGGER=true
ENABLE_GRAPHQL=false
ENABLE_WEBSOCKET=true
ENABLE_METRICS=true
ENABLE_HEALTH_CHECKS=true

# ===================================================
# DEVELOPMENT TOOLS
# ===================================================
ENABLE_DEBUG_LOGGING=false
ENABLE_QUERY_LOGGING=false
ENABLE_MOCK_DATA=false
